\title{Comparison of Quaternion and Invariant Extended Kalman Filter}
\author{Jack Sonstegard}

\maketitle

\section{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Start of introduction
\subsection{Purpose}

The purpose of this project is to explore advanced state estimation techniques that are applicable to the Aerospace industry. Specifically, I wanted to compare a Quaternion Extended Kalman Filter (QEKF) to an Invariant Extended Kalman Filter (InEKF). Both filters provide unique methods to tackle the problem of nonlinear state estimation in systems involving attitude. This report serves as a resource for background information on the formulation of each filter and provides a Monte Carlo simulation that compares each filter.

\subsection{Outline}

This document begins with a background on how IMU, GPS, and magnetometer measurements can be modeled. The essential background needed to understand both the QEKF and InEKF filters is then provided, including derivation steps for the error dynamics. Building on this foundation, the filters are applied in a simulation using drone sensor and truth data from the Mid-Air Dataset \cite{Fonder2019MidAir}. A Monte Carlo analysis reveals that when using both filters the overall errors are comparable but the initial convergence of the states in the InEKF is slightly better.

\subsection{Disclaimer}

This document is not intended to be a comprehensive guide to each filter but is intended to provide enough background such that someone could start experimenting with each filter assuming they already have some background in Kalman Filtering. Throughout this document different references will be cited; however, there are two main papers that helped me learn the most about each filter. The first is the paper by Joan Sol{\`{a}} titled "Quaternion kinematics for the error-state Kalman Filter" \cite{Quaternion_Kinematics_for_the_Error-state_EKF}. This paper gives a detailed explanation of quaternion definitions, conventions, and their use in filtering. The second paper is by Ross Hartley et al., titled "Contact-Aided Invariant Extended Kalman Filtering for Robot State Estimation" \cite{Contact-Aided_Invarant_EKF}. This paper was my original inspiration for starting this project. In this paper, the InEKF is derived in multiple forms and a necessary background is provided for Lie groups and Lie algebras.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%